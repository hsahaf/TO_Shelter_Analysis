---
title: "Analysis of Toronto Homeless Shelter System"
subtitle: "My subtitle if needed"
author: "Huda Sahaf"
thanks: "Code and data are available at: https://open.toronto.ca/catalogue/."
date: "`r Sys.time()`"
date-format: "D MMMM YYYY"
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
bibliography: references.bib
---

```{r}
library(tidyverse)
library(janitor)
library(dplyr)
library(ggplot2)
library(opendatatoronto)
```

```{r}
###Read in Data####
raw_shelter_data<-
  read_csv(
    file = 
      "https://ckan0.cf.opendata.inter.prod-toronto.ca/dataset/ac77f532-f18b-427c-905c-4ae87ce69c93/resource/237d5eff-ba47-46c4-8717-a92a802abdf7/download/toronto-shelter-system-flow.csv",
    show_col_types = FALSE
  )
write_csv(
  x = raw_shelter_data,
  file = "to_shelter_system.csv"
)
head(raw_shelter_data)
tail(raw_shelter_data)
```

```{r}
####Basic Cleaning ###
raw_shelter_data<-
  read_csv(
    file = "to_shelter_system.csv",
    show_col_types = FALSE
  )
# Make the names easier to type
cleaned_shelter_data <-
  clean_names(raw_shelter_data)

# Have a look at the first six rows
head(cleaned_shelter_data)
```

```{r}
#### Renaming the columns ####
names(cleaned_shelter_data)

cleaned_shelter_data<-
  cleaned_shelter_data |>
  rename(
    dates = date_mmm_yy,
    group_percentage = population_group_percentage,
    trans_nb_twospirit = gender_transgender_non_binary_or_two_spirit,
    male = gender_male,
    female = gender_female,
    over65 = age65over,
    under16 = ageunder16
  )
head(cleaned_shelter_data)
```

```{r}
#### Simplifying the Dates: #### 
cleaned_shelter_data <-
  cleaned_shelter_data |>
  separate(
    col = dates,
    into = c("Month", "Year"),
    sep = "-"
  )
head(cleaned_shelter_data)
```

```{r}
#| include: FALSE

knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(palmerpenguins)
```


# Introduction

You can and should cross-reference sections and sub-sections. For instance, Section \@ref(data). Quarto automatically makes the sections lower case and adds a dash to spaces to generate labels, for instance, Section \@ref(first-discussion-point). 



# Data

Our data is of penguins (@fig-bills).

```{r}
#| label: fig-bills
#| fig-cap: Bills of penguins
#| echo: false

ggplot(penguins, aes(x = island, fill = species)) +
  geom_bar(alpha = 0.8) +
  scale_fill_manual(values = c("darkorange","purple","cyan4"),
                    guide = "none") +
  theme_minimal() +
  facet_wrap(~species, ncol = 1) +
  coord_flip()
```

Talk more about it.

Also bills and their average (@fig-billssssss). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work.)

```{r}
#| label: fig-billssssss
#| fig-cap: More bills of penguins
#| echo: false
#| fig-width: 8
#| fig-height: 4

ggplot(penguins, aes(x = island, fill = species)) +
  geom_bar(alpha = 0.8) +
  scale_fill_manual(values = c("darkorange","purple","cyan4"),
                    guide = FALSE) +
  theme_minimal() +
  facet_wrap(~species, ncol = 1) +
  coord_flip()
```

Talk way more about it. 



# Model

$$
Pr(\theta | y) = \frac{Pr(y | \theta) Pr(\theta)}{Pr(y)}
$$ {#eq-bayes}

@eq-bayes seems useful, eh?

Here's a dumb example of how to use some references: In paper we run our analysis in `R` [@citeR]. We also use the `tidyverse` which was written by @thereferencecanbewhatever If we were interested in baseball data then @citeLahman could be useful. 

We can use maths by including latex between dollar signs, for instance $\theta$.

```{r}
?tibble
```

# Results

# Discussion

## First discussion point

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional details


\newpage


# References


